# ハードウェアブザー付きカードリーダー対応ガイド

## 📋 概要

このガイドでは、エレコム MR-ICA001BKのようなハードウェアブザー/LED付きカードリーダーを使用する際の設定方法を説明します。

## 🔊 問題点

### ハードウェアブザー付きリーダーの特徴

**エレコム MR-ICA001BK** などのリーダーには以下の特徴があります：

- ✅ LEDランプ内蔵
- ✅ ブザー内蔵
- ✅ カードをかざすと**自動的に**音が鳴る（ハードウェア制御）

### 発生する問題

```
ユーザーがカードをかざす
    ↓
【1】ハードウェアのブザーが鳴る（即座に）
    ↓
【2】コード側の読み取り音が鳴る（ほぼ同時）
    ↓
音が重複して混乱！
```

**混乱のポイント：**
- ハードウェアの音 = カード検出時（読み込み前）
- コードの音 = カード読み込み完了時
- ユーザーは「読み込みが完了したのか、まだなのか」が分かりにくい

## ✅ 解決策

### 方法1: カード読み取り音を無効化（推奨）

**`client_config.json`** に以下の設定を追加：

```json
{
  "server_url": "http://192.168.1.31:5000",
  "beep_settings": {
    "enabled": true,
    "card_read": false,
    "success": true,
    "fail": true
  }
}
```

#### 音の設定詳細

| 設定項目 | 説明 | 推奨値（ハードウェアブザー有り） | 推奨値（通常） |
|---------|------|--------------------------------|--------------|
| `enabled` | 全体の音の有効/無効 | `true` | `true` |
| `card_read` | カード読み取り音 | `false` ⭐ | `true` |
| `success` | 送信成功音 | `true` | `true` |
| `fail` | 送信失敗音 | `true` | `true` |

⭐ **重要**: ハードウェアブザー付きリーダーでは `"card_read": false` に設定

### 音のタイミング

```
【ハードウェアブザー有り + 推奨設定】
カードをかざす
  ↓
ピッ（ハードウェア）← カード検出
  ↓
[処理中...]
  ↓
ピピピッ（コード・成功音）← サーバー送信成功
または
ブーブー（コード・失敗音）← サーバー送信失敗
```

これにより：
- ✅ 1回目の音 = カード検出（ハードウェア）
- ✅ 2回目の音 = 処理結果（コード）
- ✅ 明確に区別できる！

## 🔧 設定方法

### ステップ1: 設定ファイルの作成/編集

`client_config.json` を開いて編集：

```json
{
  "server_url": "http://192.168.1.31:5000",
  "beep_settings": {
    "enabled": true,
    "card_read": false,
    "success": true,
    "fail": true
  }
}
```

### ステップ2: プログラムの再起動

```bash
python win_client.py
```

### ステップ3: 動作確認

1. カードをかざす
2. ハードウェアの音が1回だけ鳴る
3. サーバー送信後に成功/失敗の音が鳴る

## 📚 関連ドキュメント

- [LED接続ガイド](LED_CONNECTION_GUIDE.md)
- [トラブルシューティング](TROUBLESHOOTING.md)

