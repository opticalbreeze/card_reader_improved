# æ‰“åˆ»ã‚·ã‚¹ãƒ†ãƒ  - ã‚µãƒ¼ãƒãƒ¼å´README

## ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
C:\Users\take_me_hospital\Desktop\N100\
â”œâ”€â”€ server.py                     â˜… Flaskã‚µãƒ¼ãƒãƒ¼æœ¬ä½“
â”œâ”€â”€ requirements_server.txt       ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.html               ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ search.html              æ¤œç´¢ãƒšãƒ¼ã‚¸
â”‚
â”œâ”€â”€ Dockerfile                    Dockerè¨­å®š
â”œâ”€â”€ docker-compose.yml            Docker Composeè¨­å®š
â”œâ”€â”€ .dockerignore                 Dockeré™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«
â”‚
â”œâ”€â”€ start_server.bat              é€šå¸¸ç‰ˆèµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ start_docker.bat              Dockerç‰ˆèµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ stop_docker.bat               Dockerç‰ˆåœæ­¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â”œâ”€â”€ DOCKER_GUIDE.md               Dockerè©³ç´°ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ README_SERVER.md              ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”‚
â””â”€â”€ attendance.db                 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
```

---

## ğŸš€ èµ·å‹•æ–¹æ³•

### æ–¹æ³•1: Dockerç‰ˆï¼ˆæ¨å¥¨ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ:**
- âœ… Pythonã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦
- âœ… ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ä¸è¦
- âœ… ç’°å¢ƒä¾å­˜ã®ãƒˆãƒ©ãƒ–ãƒ«ãªã—

**èµ·å‹•:**
```cmd
start_docker.bat ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯
```

ã¾ãŸã¯

```bash
docker-compose up -d
```

**è©³ç´°:** `DOCKER_GUIDE.md` ã‚’å‚ç…§

---

### æ–¹æ³•2: é€šå¸¸ç‰ˆï¼ˆPythonç›´æ¥å®Ÿè¡Œï¼‰

**å¿…è¦ãªã‚‚ã®:**
- Python 3.7ä»¥ä¸Š

**ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—:**
```bash
pip install flask
```

**èµ·å‹•:**
```cmd
start_server.bat ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯
```

ã¾ãŸã¯

```bash
python server.py
```

---

## ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹

ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ãŸã‚‰ï¼š

```
http://192.168.1.31:5000    (ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å†…ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹)
http://localhost:5000        (ã‚µãƒ¼ãƒãƒ¼è‡ªèº«ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹)
```

---

## ğŸ“Š API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### 1. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
```
GET /api/health
```

### 2. æ‰“åˆ»ãƒ‡ãƒ¼ã‚¿å—ä¿¡
```
POST /api/attendance
Content-Type: application/json

{
  "idm": "012E447C1234ABCD",
  "timestamp": "2025-01-15T09:30:45",
  "terminal_id": "AA:BB:CC:DD:EE:FF"
}
```

### 3. ãƒ‡ãƒ¼ã‚¿æ¤œç´¢
```
GET /api/search?idm=012E&start_date=2025-01-01&end_date=2025-01-31
```

### 4. çµ±è¨ˆæƒ…å ±
```
GET /api/stats
```

è©³ç´°ã¯ `SYSTEM_OVERVIEW.md` ã‚’å‚ç…§

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

### ãƒ•ã‚¡ã‚¤ãƒ«
```
attendance.db
```

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 
```sql
CREATE TABLE attendance (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    idm TEXT NOT NULL,
    timestamp TEXT NOT NULL,
    terminal_id TEXT NOT NULL,
    received_at TEXT NOT NULL
);
```

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

**Windows:**
```cmd
copy attendance.db attendance_backup_%date:~0,4%%date:~5,2%%date:~8,2%.db
```

**Linux/Mac:**
```bash
cp attendance.db attendance_backup_$(date +%Y%m%d).db
```

---

## ğŸ”§ è¨­å®šå¤‰æ›´

### ãƒãƒ¼ãƒˆç•ªå·ã®å¤‰æ›´

#### Dockerç‰ˆ
`docker-compose.yml` ã‚’ç·¨é›†ï¼š
```yaml
ports:
  - "5001:5000"  # å·¦å´ã‚’å¤‰æ›´
```

#### é€šå¸¸ç‰ˆ
`server.py` ã®æœ€çµ‚è¡Œã‚’ç·¨é›†ï¼š
```python
app.run(host='0.0.0.0', port=5001, debug=False)
```

---

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Dockerç‰ˆ

**ãƒãƒ¼ãƒˆ5000ãŒä½¿ç”¨ä¸­:**
```bash
# ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
netstat -ano | findstr :5000

# ãƒãƒ¼ãƒˆç•ªå·ã‚’å¤‰æ›´ï¼ˆdocker-compose.ymlç·¨é›†ï¼‰
```

**ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ãªã„:**
```bash
# ãƒ­ã‚°ç¢ºèª
docker-compose logs

# å†ä½œæˆ
docker-compose down
docker-compose up -d --force-recreate
```

### é€šå¸¸ç‰ˆ

**FlaskãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„:**
```bash
pip install flask
```

**ãƒãƒ¼ãƒˆ5000ãŒä½¿ç”¨ä¸­:**
```bash
# ãƒãƒ¼ãƒˆç•ªå·ã‚’å¤‰æ›´ï¼ˆserver.pyç·¨é›†ï¼‰
```

---

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### æ¨å¥¨ã‚¹ãƒšãƒƒã‚¯
- CPU: 2ã‚³ã‚¢ä»¥ä¸Š
- RAM: 1GBä»¥ä¸Š
- ãƒ‡ã‚£ã‚¹ã‚¯: 5GBä»¥ä¸Š

### åŒæ™‚æ¥ç¶šæ•°
- æœ€å¤§: 100ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆç›®å®‰ï¼‰
- æ¨å¥¨: 10-20ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### ç¾åœ¨ã®å®Ÿè£…ï¼ˆè©¦ä½œç‰ˆï¼‰
- âš ï¸ èªè¨¼ãªã—
- âš ï¸ HTTPé€šä¿¡
- âœ… SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–æ¸ˆã¿

### æœ¬ç•ªç’°å¢ƒæ¨å¥¨
1. HTTPSåŒ–
2. èªè¨¼æ©Ÿèƒ½ã®è¿½åŠ 
3. ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®š
4. ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°è¨˜éŒ²

---

## ğŸ“ ãƒ­ã‚°

### Dockerç‰ˆ
```bash
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ­ã‚°
docker-compose logs -f

# æœ€æ–°100è¡Œ
docker-compose logs --tail=100
```

### é€šå¸¸ç‰ˆ
ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã•ã‚Œã¾ã™

---

## ğŸ”„ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

### Dockerç‰ˆ
```bash
# ã‚³ãƒ³ãƒ†ãƒŠåœæ­¢
docker-compose down

# ã‚¤ãƒ¡ãƒ¼ã‚¸å†ãƒ“ãƒ«ãƒ‰
docker-compose build --no-cache

# èµ·å‹•
docker-compose up -d
```

### é€šå¸¸ç‰ˆ
```bash
# ã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ï¼ˆCtrl+Cï¼‰

# ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°

# å†èµ·å‹•
python server.py
```

---

## ğŸ’¡ é‹ç”¨Tips

### è‡ªå‹•èµ·å‹•ï¼ˆWindowsï¼‰

**ã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã§è¨­å®š:**
1. ã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã‚’é–‹ã
2. ã€ŒåŸºæœ¬ã‚¿ã‚¹ã‚¯ã®ä½œæˆã€
3. ãƒˆãƒªã‚¬ãƒ¼: Windowsã®èµ·å‹•æ™‚
4. æ“ä½œ: `start_docker.bat` ã‚’å®Ÿè¡Œ

### å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

**ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ:**
```batch
@echo off
cd C:\Users\take_me_hospital\Desktop\N100
copy attendance.db backups\attendance_%date:~0,4%%date:~5,2%%date:~8,2%.db
```

ã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ã§æ¯æ—¥å®Ÿè¡Œ

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆï¼š

1. **ãƒ­ã‚°ã‚’ç¢ºèª**
2. **Docker/Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª**
3. **ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®šç¢ºèª**
4. **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šç¢ºèª**

---

**ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†ï¼** ğŸ‰

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®è¨­å®šã¯ `SETUP_GUIDE.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

